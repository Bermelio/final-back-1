<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Carritos</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">

  <div class="container mx-auto px-4 py-8">

    <h1 class="text-3xl font-bold mb-6 text-center">üõí Carritos</h1>

    <div class="flex justify-end mb-2">
      <a class="group relative inline-block overflow-hidden border border-indigo-600 px-4 py-2 focus:ring-3 focus:outline-hidden" href="/products">
        <span class="absolute inset-y-0 left-0 w-[2px] bg-indigo-600 transition-all group-hover:w-full"></span>
        <span class="relative text-sm font-medium text-indigo-600 transition-colors group-hover:text-white">
          üè™ Volver a productos
        </span>
      </a>
    </div>

    {{#each carts}}
    <div class="flex flex-col items-center bg-white rounded-2xl shadow-md p-4 mt-4 mb-4">
      <h2 class="text-xl font-semibold mb-2">üß∫ Carrito ID:</h2>
      <p class="text-sm text-gray-500 mb-4">{{this._id}}</p>
    </div>
        <div class="bg-white rounded-2xl shadow-md p-4 flex flex-col justify-between">
            {{#if this.products.length}}
              <ul class="space-y-2">
                {{#each this.products}}
                  <li class="flex justify-between items-center p-2 border-b border-gray-200">
                    <div class="flex items-center gap-5">
                      <img src="{{this.product.thumbnail}}" alt="{{this.product.title}}" class="w-16 h-16 object-cover rounded-lg mr-4">
                      <h3 class="text-lg font-semibold">{{this.product.title}}</h3>
                      <p class="text-sm text-gray-500">Cantidad: {{this.quantity}}</p>
                      <p class="text-sm text-gray-500">Precio: ${{this.product.price}}</p>
                    </div>
                    <button 
                      class="delete-product text-red-600 hover:text-red-800 delete-from-cart" 
                      data-cart="{{../this._id}}" 
                      data-product="{{this.product._id}}">
                      ‚ùå Eliminar
                    </button>
                  </li>
                {{/each}}
              </ul>
            {{else}}
            <p class="text-gray-500 italic">Este carrito est√° vac√≠o...</p>
            {{/if}}
        </div>
      <div class="flex justify-between items-center mt-4">
        <div class="flex flex-col items-center bg-white rounded-2xl shadow-md p-4 mt-4 mb-4">
          <h2 class="text-xl font-semibold mb-2">SubTotal</h2>
          <p class="text-lg font-bold text-indigo-600">${{subtotal}}</p>
          <a
          id="buy-button"
          class="inline-block rounded-sm bg-indigo-600 px-8 py-3 text-sm font-medium text-white transition hover:scale-110 hover:shadow-xl focus:ring-3 focus:outline-hidden"
          {{!-- href="#" --}}
          >
          Comprar~!
          </a>
        </div>
      </div>
      {{/each}}
    </div>
  </div>
  <script src="/js/deleteFromCart.js"></script>

<script>
  document.getElementById('buy-button').addEventListener('click', function (event) {
    event.preventDefault();
    alert('Gracias por tu compra! \n Aca tercerisariamo y descontariamos el stock etc... \n Pero por ahora solo es una demo');
  });
</script>


</body>
</html>
